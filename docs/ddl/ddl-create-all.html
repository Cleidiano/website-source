<html>
<head>
  <title>Create All DDL | Docs | Ebean</title>
  <meta name="layout" content="_layout/docs_ddl.html"/>
  <meta name="bread2" content="Create all" href="/docs/ddl/"/>
<#assign ddlcreateall = "true">
</head>
<body>
  <h2 id="overview">Overview</h2>
  <p>
    Ebean can generate and execute <code>CREATE ALL</code> and <code>DROP ALL</code> DDL
    scripts which create all the tables. This is used for testing purposes.
  </p>
  <blockquote>
    When running a test or suite of tests the DB is created entirely from scratch
  </blockquote>

  <h2 id="test-config">Using ebean-test</h2>
  <p>
    The best way to control and run DDL for testing is to use <a href="/docs/testing">ebean-test</a>
    and the <a href="/docs/testing#ddlmode">ddlMode</a>. Using <code>dropCreate</code> means the DDL for
    create-all and drop-all is generated and run.
  </p>
  <h5>In application-test.yml</h5>
```yml
ebean:
  test:
    platform: h2 # h2, postgres, mysql, oracle, sqlserver
    ddlMode: dropCreate # none | dropCreate | create | migration | createOnly | migrationDropCreate
    dbName: myapp
```

  <h2 id="properties">Using properties</h2>
  <p>
    If we don't want to use <a href="/docs/testing">ebean-test</a> we can instead set both
    <code>ebean.ddl.generate</code> and <code>ebean.ddl.run</code> properties to true in
    <code>application-test.yml</code> (which is in src/test/resources) and in this way the <code>CREATE ALL</code>
    DDL is only generated and executed when running tests.
  </p>

  <h5>In application-test.yml</h5>
  ```yml
ebean:
  ddl:
    generate: true
    run: true
```

  <h5>Or application-test.properties</h5>
```properties
ebean.ddl.generate=true
ebean.ddl.run=true
```

  <h2>Initial DDL</h2>
  <p>
    We can specify DDL to execute prior to running the `create-all` DDL.
  </p>
  ```properties
  ebean.ddl.initSql=testInitialDdl.sql
  ```

  <h2>Seed DDL</h2>
  <p>
    We can specify DDL to execute after running the `create-all` DDL which we typically use to seed the database.
  </p>
  ```properties
  ebean.ddl.seedSql=testSeedData.sql
  ```

  <h2>DB Migration</h2>
  <p>
    <a href="dbmigration">DB Migration</a> is different in that <code>DIFF</code> DDL scripts are generated for the
    changes to the model and these <code>DIFF</code> DDL scripts can be applied to the target database typically at
    runtime.
  </p>

  <div class="next pull-right">
    <a href="/docs/ddl/dbmigration" class="btn btn-info">Next: DB Migrations</a>
  </div>
</body>
</html>
